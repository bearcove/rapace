// @generated by rapace-codegen
// DO NOT EDIT - regenerate with `cargo xtask codegen --typescript`

export const METHOD_ID = {
  echo: 0x3d66dd9ee36b4240n,
  reverse: 0x268246d3219503fbn,
} as const;

// Type definitions
export type EchoRequest = [string];
export type EchoResponse = string;

export type ReverseRequest = [string];
export type ReverseResponse = string;

// Client interface for Echo
export interface EchoClient {
  /**  Echoes the message back. */
  echo(message: string): Promise<string>;
  /**  Returns the message reversed. */
  reverse(message: string): Promise<string>;
}

// Server handler interface for Echo
export interface EchoHandler {
  echo(message: string): Promise<string> | string;
  reverse(message: string): Promise<string> | string;
}

export function createEchoDispatcher(handler: EchoHandler) {
  return async (methodId: bigint, payload: Uint8Array): Promise<Uint8Array> => {
    switch (methodId) {
      case 0x3d66dd9ee36b4240n: {
        // TODO: decode payload, call handler, encode response
        throw new Error('echo: not yet implemented');
      }
      case 0x268246d3219503fbn: {
        // TODO: decode payload, call handler, encode response
        throw new Error('reverse: not yet implemented');
      }
      default:
        throw new Error(`Unknown method ID: ${methodId}`);
    }
  };
}
